## **ëŒ€ê·œëª¨ ì¡°íšŒìˆ˜ ë° ëž­í‚¹ ì‹œìŠ¤í…œ ì„¤ê³„**

### **0. ë¬¸ì œ ì •ì˜ ë° ìš”êµ¬ì‚¬í•­**

### **A. ì‹œìŠ¤í…œ ì •ì˜ ë° ë°°ê²½**

- **ì‹œìŠ¤í…œ:** ì¡°íšŒìˆ˜ ì‹œìŠ¤í…œ (View Count System)
- **ë°°ê²½:** ìœ íŠœë¸Œì™€ ê°™ì´ í•˜ë£¨ ìˆ˜ë°±ë§Œ ê°œì˜ ì½˜í…ì¸ ê°€ ì—…ë¡œë“œë˜ê³ , ìˆ˜ì‹­ì–µ ê°œì˜ ì½˜í…ì¸ ë¥¼ ë³´ìœ í•œ ëŒ€ê·œëª¨ í”Œëž«í¼ì„ ê°€ì •. (ì¼ì¼ ì—…ë¡œë“œ ì•½ 260ë§Œ ê°œ, ì´ ë¹„ë””ì˜¤ ì•½ 43ì–µ ê°œ)

### **B. ê¸°ëŠ¥ì  ìš”êµ¬ì‚¬í•­**

1. **ì¡°íšŒìˆ˜ ì¹´ìš´íŒ…:**
    - ì‚¬ìš©ìž ì¡°íšŒ ì‹œ ì‹¤ì‹œê°„ ì¡°íšŒìˆ˜ ì¦ê°€.
    - **ì¤‘ë³µ ì¡°íšŒ ë°©ì§€:** ì§§ì€ ì‹œê°„ ë‚´ ì¤‘ë³µ ì¡°íšŒëŠ” 1íšŒë§Œ ì¹´ìš´íŠ¸.
    - **Bot í•„í„°ë§:** ê²€ìƒ‰ ì—”ì§„ í¬ë¡¤ëŸ¬, ìŠ¤í¬ëž˜í•‘ ë´‡ ë“±ì˜ ì¡°íšŒëŠ” ì œì™¸.
    - **ìœ íš¨ ì¡°íšŒ íŒì •:** ìµœì†Œ ì²´ë¥˜ì‹œê°„(ì˜ˆ: 3ì´ˆ) ì´ìƒì¸ ê²½ìš°ë§Œ ì¹´ìš´íŠ¸.
2. **ì¡°íšŒìˆ˜ ì¡°íšŒ ë° í‘œì‹œ:**
    - ì‚¬ìš©ìžê°€ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ìµœì‹  ì¡°íšŒìˆ˜ í™•ì¸ ê°€ëŠ¥ (ê¸°ë³¸).
    - UX í–¥ìƒì„ ìœ„í•´ í™”ë©´ ì´ë™ ì—†ì´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¡°íšŒìˆ˜ ì—…ë°ì´íŠ¸ (ëª©í‘œ).
    - **ì‘ë‹µ ì†ë„:** ì¡°íšŒìˆ˜ í‘œì‹œ ìš”ì²­ì— 5ms ì´ë‚´ ì‘ë‹µ.
3. **í†µê³„ ë° ë¶„ì„ ê¸°ëŠ¥:**
    - **ì‹œê°„ë³„ í†µê³„:** ì‹œê°„/ì¼/ì£¼/ì›”ë³„ ì¡°íšŒìˆ˜ ì§‘ê³„.
    - **ì¸ê¸° ì½˜í…ì¸  ëž­í‚¹:** ì‹¤ì‹œê°„/ì¼ê°„/ì£¼ê°„ ì¸ê¸° ìˆœìœ„ ì œê³µ.
    - **(Optional) ì§€ì—­ë³„ ë¶„ì„:** êµ­ê°€/ë„ì‹œë³„ ì¡°íšŒ íŒ¨í„´ ë¶„ì„.

### **C. ê·œëª¨ ë° ì„±ëŠ¥ ìš”êµ¬ì‚¬í•­**

| ì§€í‘œ | ìš”êµ¬ì‚¬í•­ |
| --- | --- |
| ì¼ ì´ ì¡°íšŒ ìš”ì²­ | 10ì–µ ê±´ |
| í”¼í¬ ì‹œê°„ TPS | ì´ˆë‹¹ 100ë§Œ ì¡°íšŒ (ì˜¤í›„ 8-10ì‹œ) |
| ë™ì‹œ í™œì„± ì‚¬ìš©ìž | 100ë§Œ ëª… |
| ì´ ì½˜í…ì¸  ìˆ˜ | 1,000ë§Œ ê°œ (ì´ˆê¸° ê°€ì •) |
| ì¡°íšŒìˆ˜ ì¦ê°€ ì²˜ë¦¬ ì‹œê°„ | 10ms ì´ë‚´ |
| ì¡°íšŒìˆ˜ ì¡°íšŒ ì‘ë‹µ ì‹œê°„ | 5ms ì´ë‚´ |
| ì‹¤ì‹œê°„ ë°˜ì˜ ì§€ì—° | ìµœëŒ€ 30ì´ˆ |

### **D. ë¹„ê¸°ëŠ¥ì  ìš”êµ¬ì‚¬í•­**

- **ì •í™•ì„± vs ì„±ëŠ¥ì˜ ê· í˜•:**
    - **ì‹¤ì‹œê°„ ì •í™•ë„:** 95% (ì•½ê°„ì˜ ì˜¤ì°¨ í—ˆìš©).
    - **ìµœì¢… ì •í™•ë„:** 99.9% (ë°°ì¹˜ ë³´ì • í›„).
    - **ì¤‘ë³µ ì œê±°ìœ¨:** 90% (ì™„ë²½í•œ ì¤‘ë³µ ì œê±°ë³´ë‹¤ëŠ” ì„±ëŠ¥ ìš°ì„ ).
- **í™•ìž¥ì„± ë° ê°€ìš©ì„±:**
    - **ì‹œìŠ¤í…œ ê°€ìš©ë¥ :** 99.9% ì´ìƒ.
    - **ìˆ˜í‰ í™•ìž¥:** íŠ¸ëž˜í”½ ì¦ê°€ ì‹œ ì„œë²„ ì¶”ê°€ë¡œ ì„ í˜• í™•ìž¥ ê°€ëŠ¥.
    - **ìž¥ì•  ë³µêµ¬:** ì¡°íšŒìˆ˜ ë°ì´í„° ìœ ì‹¤ ì—†ì´ 5ë¶„ ì´ë‚´ ë³µêµ¬.
- **ë°ì´í„° ë³´í˜¸:**
    - **ì¡°íšŒìˆ˜ ì¡°ìž‘ ë°©ì§€:** ë¹„ì •ìƒì ì¸ ì¡°íšŒ íŒ¨í„´ íƒì§€ ë° ì°¨ë‹¨.
    - **ë°ì´í„° ë°±ì—…:** ì‹œê°„ë³„ ì¦ë¶„ ë°±ì—…, ì¼ë³„ ì „ì²´ ë°±ì—….

---

```mermaid
erDiagram
    USERS {
        bigint user_id PK "ì‚¬ìš©ìž ID"
        varchar username "ì‚¬ìš©ìž ì´ë¦„"
        varchar email "ì´ë©”ì¼"
        timestamp created_at "ê°€ìž…ì¼"
    }

    VIDEOS {
        bigint video_id PK "ì˜ìƒ ID"
        bigint uploader_id FK "ì—…ë¡œë” ID"
        varchar title "ì˜ìƒ ì œëª©"
        text description "ì˜ìƒ ì„¤ëª…"
        bigint total_view_count "ì´ ì¡°íšŒìˆ˜ (ì§‘ê³„)"
        timestamp uploaded_at "ì—…ë¡œë“œ ì‹œê°„"
    }

    VIEW_LOGS {
        bigint view_log_id PK "ì¡°íšŒ ë¡œê·¸ ID"
        bigint video_id FK "ì˜ìƒ ID"
        bigint user_id FK "ì‚¬ìš©ìž ID (Nullable)"
        varchar viewer_ip "ì‹œì²­ìž IP"
        varchar viewer_fingerprint "ë¸Œë¼ìš°ì € í•‘ê±°í”„ë¦°íŠ¸"
        timestamp viewed_at "ì‹œì²­ ì‹œê°„"
    }

    VIDEO_STATS {
        bigint video_stat_id PK "ì˜ìƒ í†µê³„ ID"
        bigint video_id FK "ì˜ìƒ ID"
        timestamp stat_time "í†µê³„ ê¸°ì¤€ ì‹œê°„ (e.g., ì •ì‹œ)"
        enum stat_type "'HOURLY', 'DAILY'"
        int view_count_in_period "í•´ë‹¹ ê¸°ê°„ ë‚´ ì¡°íšŒìˆ˜"
    }

    USERS ||--o{ VIDEOS : "ì—…ë¡œë“œ"
    USERS ||--o{ VIEW_LOGS : "ì‹œì²­"
    VIDEOS ||--|{ VIEW_LOGS : "ì— ëŒ€í•œ"
    VIDEOS ||--o{ VIDEO_STATS : "ì˜ í†µê³„"
```

### **1ë‹¨ê³„: ìš”êµ¬ì‚¬í•­ ë¶„ì„ ë° ì„¤ê³„ (ì´ˆë‹¹ 1,000ê±´)**

### **ðŸ¤” í•µì‹¬ ì§ˆë¬¸ 1: 5ms ë‚´ ì‹¤ì‹œê°„ ì¡°íšŒìˆ˜ í‘œì‹œë¥¼ í•˜ë ¤ë©´ ì–´ë– í•œ ê¸°ìˆ ì„ ì¨ì•¼ í•˜ë‚˜?**

- **ì‚¬ê³  ê³¼ì •:**
    - 5msëŠ” ì‚¬ìš©ìžì˜ ìš”ì²­ì´ ë°ì´í„°ë² ì´ìŠ¤ê¹Œì§€ ì™•ë³µí•˜ê¸°ì—ëŠ” ë¬¼ë¦¬ì ìœ¼ë¡œ ë¶ˆê°€ëŠ¥ì— ê°€ê¹Œìš´ ì‹œê°„ìž…ë‹ˆë‹¤. ì´ëŠ” ë°ì´í„°ê°€ ë„¤íŠ¸ì›Œí¬ ì§€ì—° ì‹œê°„ì´ ê±°ì˜ ì—†ëŠ” ê³³, ì¦‰ **ë©”ëª¨ë¦¬**ì— ìžˆì–´ì•¼ í•¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.
    - ë”°ë¼ì„œ ì¡°íšŒìˆ˜ë¥¼ í‘œì‹œí•˜ëŠ” 'ì½ê¸°(Read)' ìš”ì²­ì€ RDBMSê°€ ì•„ë‹Œ Redisì™€ ê°™ì€ ì¸ë©”ëª¨ë¦¬ ìºì‹œì—ì„œ ì§ì ‘ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.
    - ë˜í•œ, ì‚¬ìš©ìžê°€ ìƒˆë¡œê³ ì¹¨ í•˜ì§€ ì•Šì•„ë„ ì¡°íšŒìˆ˜ê°€ ì˜¤ë¥´ëŠ” 'ì‹¤ì‹œê°„' ê²½í—˜ì„ ì œê³µí•˜ë ¤ë©´, ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ë¡œ ë°ì´í„°ë¥¼ ë°€ì–´ì£¼ëŠ”(Push) ê¸°ìˆ ì¸ ì›¹ì†Œì¼“(WebSocket)ì´ë‚˜ SSE(Server-Sent Events)ê°€ í•„ìš”í•©ë‹ˆë‹¤.
- **ê²°ë¡ :** **ì½ê¸° ìš”ì²­ì€ Redisì—ì„œ ì²˜ë¦¬í•˜ê³ , ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ëŠ” WebSocketì„ ì‚¬ìš©í•©ë‹ˆë‹¤.**
    - ì´ˆê¸°ì—ëŠ” SSE(ì„œë²„ê°€ í´ë¼ì´ì–¸íŠ¸ë¡œ ë‹¨ë°©í–¥ ì „ì†¡)ë„ ê³ ë ¤í•  ìˆ˜ ìžˆìœ¼ë‚˜, ìœ íŠœë¸ŒëŠ” ì‹¤ì‹œê°„ ì±„íŒ…, ì•Œë¦¼ ë“± ë‹¤ë¥¸ ê¸°ëŠ¥ì—ì„œë„ ì–‘ë°©í–¥ í†µì‹ ì´ í•„ìš”í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ì•„í‚¤í…ì²˜ì˜ ë‹¨ìˆœì„±ê³¼ ìž¬ì‚¬ìš©ì„±ì„ ìœ„í•´ WebSocketì„ ì±„íƒí•˜ëŠ” ê²ƒì´ ë” í•©ë¦¬ì ìž…ë‹ˆë‹¤.

### **ðŸ¤” í•µì‹¬ ì§ˆë¬¸ 2: ì¤‘ë³µ ì¡°íšŒë¥¼ ì–´ë–»ê²Œ íŒì •í•  ê²ƒì¸ê°€?**

- **ì‚¬ê³  ê³¼ì •:**
    1. **ì „ì œ:** ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìžì˜ ì¡°íšŒìˆ˜ë„ ì¶”ì í•˜ê¸°ë¡œ ê²°ì •í•©ë‹ˆë‹¤. ë”°ë¼ì„œ User IDë§Œìœ¼ë¡œëŠ” ë¶€ì¡±í•©ë‹ˆë‹¤.
    2. **ì„ íƒì§€ ë¶„ì„:**
        - **ë””ë°”ì´ìŠ¤ ê³ ìœ  ID (IDFA, ê´‘ê³  ID):**
            - ìž¥ì : ê¸°ê¸°ë§ˆë‹¤ ê³ ìœ í•˜ì—¬ ë§¤ìš° ì •í™•í•˜ê³ , IPì²˜ëŸ¼ ê³µìœ ë˜ê±°ë‚˜ ì„¸ì…˜ì²˜ëŸ¼ ë§Œë£Œë˜ì§€ ì•ŠìŒ.
            - ë‹¨ì : **ê°œì¸ì •ë³´ë³´í˜¸ ê°•í™”ë¡œ 2024ë…„ ê¸°ì¤€ ì‚¬ì‹¤ìƒ ì‚¬ìš© ë¶ˆê°€.** iOSì˜ IDFA ë™ì˜ìœ¨ì€ ë§¤ìš° ë‚®ê³ , Android ê´‘ê³  IDë„ ì‚¬ìš©ìžê°€ ë¹„í™œì„±í™”í•  ìˆ˜ ìžˆìŒ. ëŒ€ì•ˆìœ¼ë¡œ ì„¤ì¹˜ ì‹œ ìƒì„±í•˜ëŠ” UUIDê°€ ìžˆì§€ë§Œ, ì•± ìž¬ì„¤ì¹˜ ì‹œ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.
        - **ì¿ í‚¤(Cookie):**
            - ìž¥ì : ì„œë²„ì— ì‚¬ìš©ìž ì •ë³´ë¥¼ ì €ìž¥í•  í•„ìš”ê°€ ì—†ì–´ ë¶€í•˜ê°€ ì ìŒ.
            - ë‹¨ì : ì‚¬ìš©ìžê°€ ì¿ í‚¤ë¥¼ ì‚­ì œ/ì¡°ìž‘í•˜ì—¬ ì¡°íšŒìˆ˜ë¥¼ ëŠ˜ë¦´ ìˆ˜ ìžˆìŒ. **ëª¨ë°”ì¼ ì•±ì—ì„œëŠ” ì‚¬ìš© ë¶ˆê°€.**
            - ë³´ì™„ì±…: 'ìµœì†Œ ì²´ë¥˜ ì‹œê°„(3ì´ˆ)' ì¡°ê±´ì„ ê²°í•©í•˜ì—¬ ë‹¨ìˆœ ë°˜ë³µ ìš”ì²­ì„ í†µí•œ ì¡°ìž‘ì„ ë°©ì§€. ì¿ í‚¤ í¬ê¸° ì œí•œ(4KB)ì€ LRU(Least Recently Used) ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ìµœê·¼ ì‹œì²­ ê¸°ë¡ë§Œ ì €ìž¥í•˜ì—¬ í•´ê²°.
        - **ì„¸ì…˜(Session):**
            - ìž¥ì : ì„œë²„ì—ì„œ ê´€ë¦¬í•˜ë¯€ë¡œ ì¿ í‚¤ë³´ë‹¤ ì¡°ìž‘ ê°€ëŠ¥ì„±ì´ ë‚®ìŒ.
            - ë‹¨ì : ëª¨ë“  ë¹„ë¡œê·¸ì¸ ì‚¬ìš©ìžì˜ ì„¸ì…˜ ì •ë³´ë¥¼ ì„œë²„ ë©”ëª¨ë¦¬ì— ì €ìž¥í•´ì•¼ í•˜ë¯€ë¡œ ì‚¬ìš©ìž ìˆ˜ê°€ ë§Žì•„ì§€ë©´ ì„œë²„ì— í° ë¶€ë‹´. ë¸Œë¼ìš°ì € ì¢…ë£Œ ì‹œ ì„¸ì…˜ì´ ë§Œë£Œë˜ì–´ ìž¬ë°©ë¬¸ ì‹œ ì¤‘ë³µìœ¼ë¡œ ì¹´ìš´íŠ¸ë  ìˆ˜ ìžˆìŒ.
        - **IP ì£¼ì†Œ:**
            - ìž¥ì : êµ¬í˜„ì´ ê°„ë‹¨í•˜ê³  ì¡°ìž‘ì´ ë¹„êµì  ì–´ë ¤ì›€.
            - ë‹¨ì : ì‚¬ë¬´ì‹¤, ì¹´íŽ˜ ë“± NAT í™˜ê²½ì—ì„œëŠ” ì—¬ëŸ¬ ì‚¬ìš©ìžê°€ ê°™ì€ ê³µì¸ IPë¥¼ ê³µìœ í•˜ì—¬ ì •ìƒì ì¸ ì¡°íšŒê°€ ëˆ„ë½ë  ìˆ˜ ìžˆìŒ.
            - ë³´ì™„ì±…: **ë¸Œë¼ìš°ì € í•‘ê±°í”„ë¦°íŒ…(Browser Fingerprinting)**ì„ ìˆ˜ì§‘í•˜ì—¬ IPê°€ ê°™ë”ë¼ë„ ë‹¤ë¥¸ ì‚¬ìš©ìžë¡œ êµ¬ë³„. (ë¸Œë¼ìš°ì € ì¢…ë¥˜/ë²„ì „, OS, í™”ë©´ í•´ìƒë„, í°íŠ¸, ì‹œê°„ëŒ€ ë“± ì¡°í•©)
- **ê²°ë¡ :** **IPëŠ” ë³´ì¡° ìˆ˜ë‹¨ìœ¼ë¡œ ê²©ì„ ë‚®ì¶”ê³ , ë‹¤ê³„ì¸µ(Multi-layered) ì‹ë³„ ì „ëžµì„ ì‚¬ìš©í•©ë‹ˆë‹¤.**
    - **ë¡œê·¸ì¸ ì‚¬ìš©ìž:** **User ID**ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤. (ê°€ìž¥ ì •í™•)
    - **ë¹„ë¡œê·¸ì¸ ì›¹:** **Cookie**ë¥¼ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ë˜, ì–´ë·°ì§• ë°©ì§€ë¥¼ ìœ„í•´ **IP + ìµœì†Œí•œì˜ Browser Fingerprint**ë¥¼ ë³´ì¡° ìˆ˜ë‹¨ìœ¼ë¡œ í™œìš©í•©ë‹ˆë‹¤.
    - **ë¹„ë¡œê·¸ì¸ ì•±:** ì•± ì„¤ì¹˜ ì‹œ ìƒì„±í•˜ëŠ” **ê³ ìœ  UUID**ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.
    - í–¥í›„ ì‹œìŠ¤í…œ ê·œëª¨ê°€ ì»¤ì§€ë©´ ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ì˜ íŒ¨í„´ ì¸ì‹ìœ¼ë¡œ ì–´ë·°ì§•ì„ ê³ ë„í™”í•©ë‹ˆë‹¤.

### **ðŸ¤” í•µì‹¬ ì§ˆë¬¸ 3: Botì„ ì–´ë–»ê²Œ êµ¬ë¶„í•  ê²ƒì¸ê°€?**

- **ì‚¬ê³  ê³¼ì •:**
    - ë´‡ íŠ¸ëž˜í”½ì€ ì‹¤ì œ ì‚¬ìš©ìž ì¡°íšŒìˆ˜ê°€ ì•„ë‹ˆë¯€ë¡œ í•„í„°ë§ì´ í•„ìˆ˜ì ìž…ë‹ˆë‹¤.
- **ê²°ë¡ :** ê¸°ë³¸ì ì¸ ë´‡ íƒì§€ ì „ëžµì„ ì ìš©í•©ë‹ˆë‹¤.
    - **HTTP ë¦¬í¼ëŸ¬(Referrer) ê²€ì¦:** ìœ íš¨í•œ ì›¹ì‚¬ì´íŠ¸(ìš°ë¦¬ ì„œë¹„ìŠ¤ ë„ë©”ì¸)ë¥¼ í†µí•´ ë“¤ì–´ì˜¨ ìš”ì²­ì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤. (ê°€ìž¥ ê¸°ë³¸)
    - **ë¹„ì •ìƒì ì¸ ì‹œì²­ íŒ¨í„´ ë¶„ì„:** ë¹„ì •ìƒì ìœ¼ë¡œ ì§§ì€ ê°„ê²©ìœ¼ë¡œ ì—¬ëŸ¬ ì˜ìƒì„ ì¡°íšŒí•˜ê±°ë‚˜, ì—¬ëŸ¬ ì˜ìƒì„ ì •í™•ížˆ ë™ì¼í•œ ì‹œê°„ë§Œí¼ë§Œ ì‹œì²­í•˜ëŠ” ë“±ì˜ íŒ¨í„´ì„ íƒì§€í•˜ì—¬ ì°¨ë‹¨í•©ë‹ˆë‹¤.

### **ðŸŒŸ 1ë‹¨ê³„ì—ì„œ í‚¤ìš¸ ìˆ˜ ìžˆëŠ” ì—­ëŸ‰**

- **ìš”êµ¬ì‚¬í•­ ëª…í™•í™” ëŠ¥ë ¥:** ì• ë§¤í•œ ìš”êµ¬ì‚¬í•­(e.g., 'ì¡°íšŒìˆ˜')ì„ êµ¬ì²´ì ìœ¼ë¡œ ì •ì˜í•˜ëŠ” ëŠ¥ë ¥.
- **ê¸°ë³¸ ì„¤ê³„ ì‚¬ê³ :** ë³µìž¡í•œ ë¬¸ì œë„ ë‹¨ìˆœí•œ êµ¬ì¡°ì—ì„œë¶€í„° ì‹œìž‘í•˜ì—¬ ì ì§„ì ìœ¼ë¡œ ë°œì „ì‹œí‚¤ëŠ” ì ‘ê·¼ë²•.
- **ë°ì´í„° ëª¨ë¸ë§:** ì¡°íšŒìˆ˜ ê´€ë ¨ í…Œì´ë¸”ì„ ì„¤ê³„í•˜ê³ , ê¸°ë³¸ì ì¸ ì¸ë±ìŠ¤ ì „ëžµì„ ìˆ˜ë¦½í•˜ëŠ” ëŠ¥ë ¥.

---

### **2ë‹¨ê³„: ì„±ëŠ¥ ìµœì í™” (ì´ˆë‹¹ 10,000ê±´)**

**ëª©í‘œ:** DBê°€ ë³‘ëª©ì´ ë˜ëŠ” ê²ƒì„ ë°©ì§€í•˜ê³  ì‹œìŠ¤í…œ ì‘ë‹µ ì†ë„ë¥¼ ë†’ì´ê¸° ìœ„í•´ **ìºì‹œë¥¼ ë„ìž…**í•˜ì—¬ ì„±ëŠ¥ì„ íŠœë‹í•©ë‹ˆë‹¤.

### **ðŸ¤” í•µì‹¬ ì§ˆë¬¸ 1: DBì— ì§ì ‘ ì“°ê¸° vs ìºì‹œ í™œìš©, ì–´ë–¤ ì „ëžµì´ ì¢‹ì„ê¹Œ?**

- **ì‚¬ê³  ê³¼ì •:**
    - **DB ì§ì ‘ ì“°ê¸°:** ì´ˆë‹¹ 10,000ê±´ì˜ `UPDATE` ì¿¼ë¦¬ëŠ” DBì— ì—„ì²­ë‚œ ë¶€í•˜ë¥¼ ì£¼ë©°, í…Œì´ë¸” ë½(Lock) ê²½í•©ìœ¼ë¡œ ì¸í•´ ì‹œìŠ¤í…œ ì „ì²´ê°€ ë§ˆë¹„ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - **ìºì‹œ í™œìš©:** ë©”ëª¨ë¦¬ì—ì„œ ì›ìžì (Atomic)ìœ¼ë¡œ `INCR` ì—°ì‚°ì„ ìˆ˜í–‰í•˜ê³ , ì£¼ê¸°ì ìœ¼ë¡œ DBì— ë°°ì¹˜(Batch) ì—…ë°ì´íŠ¸ë¥¼ í•˜ë©´ DB ë¶€í•˜ë¥¼ íšê¸°ì ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - **íŠ¸ë ˆì´ë“œì˜¤í”„:** ìºì‹œëŠ” ë¹ ë¥´ì§€ë§Œ ë°ì´í„° ìœ ì‹¤ì˜ ìœ„í—˜ì´ ìžˆê³ , DBëŠ” ì•ˆì „í•˜ì§€ë§Œ ëŠë¦½ë‹ˆë‹¤. ì¡°íšŒìˆ˜ëŠ” ì•½ê°„ì˜ ìœ ì‹¤ì´ ì¹˜ëª…ì ì´ì§€ ì•Šìœ¼ë¯€ë¡œ ì„±ëŠ¥ì— ìš°ì„ ìˆœìœ„ë¥¼ ë‘¡ë‹ˆë‹¤.
- **ê²°ë¡ :** **ìºì‹œ ìš°ì„  ì „ëžµì„ ì±„íƒí•©ë‹ˆë‹¤.** Redisì—ì„œ ì¡°íšŒìˆ˜ ì¦ê°€ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì²˜ë¦¬í•˜ê³ , 1ë¶„ë§ˆë‹¤ ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ í†µí•´ DBì— ë°°ì¹˜ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.

### **ðŸ¤” í•µì‹¬ ì§ˆë¬¸ 2: Redis/Memcached ì¤‘ ì–´ë–¤ ê²ƒì„ ì„ íƒí•˜ê³  ì™œ?**

- **ì‚¬ê³  ê³¼ì •:**
    - **Memcached:** ë‹¨ìˆœí•œ Key-Value ì €ìž¥ì†Œ. ë©€í‹°ìŠ¤ë ˆë“œë¥¼ ì§€ì›í•˜ì—¬ íŠ¹ì • ìƒí™©ì—ì„œ ë” ë†’ì€ ì²˜ë¦¬ëŸ‰ì„ ë³´ì¼ ìˆ˜ ìžˆìŒ.
    - **Redis:** ë‹¤ì–‘í•œ ìžë£Œêµ¬ì¡°(String, List, Set, **Sorted Set** ë“±)ë¥¼ ì§€ì›. **ì›ìžì  ì—°ì‚°(`INCR`)ì„ ì§€ì›**í•˜ì—¬ ì¡°íšŒìˆ˜ ì¹´ìš´íŒ…ì— ìµœì í™”. ìŠ¤ëƒ…ìƒ·(RDB) ë° AOFë¥¼ í†µí•´ **ë°ì´í„° ì˜ì†ì„±**ì„ ë³´ìž¥. Replicationì„ í†µí•œ **ê³ ê°€ìš©ì„±** êµ¬ì„± ê°€ëŠ¥.
- **ê²°ë¡ :** **Redisë¥¼ ì„ íƒí•©ë‹ˆë‹¤.** ì¡°íšŒìˆ˜ ì¹´ìš´íŒ…ì— í•„ìˆ˜ì ì¸ ì›ìžì  ì—°ì‚°, ìž¥ì•  ì‹œ ë°ì´í„° ìœ ì‹¤ì„ ìµœì†Œí™”í•˜ëŠ” ì˜ì†ì„± ê¸°ëŠ¥, ì¶”í›„ ëž­í‚¹ ì‹œìŠ¤í…œ êµ¬í˜„ì— í•„ìš”í•œ Sorted Set ë“± ì¡°íšŒìˆ˜ ì‹œìŠ¤í…œì˜ ìš”êµ¬ì‚¬í•­ì— í›¨ì”¬ ë” ì í•©í•©ë‹ˆë‹¤.

### **ðŸ¤” í•µì‹¬ ì§ˆë¬¸ 3: ìºì‹œ ë°ì´í„°ì™€ DB ë°ì´í„° ê°„ ì¼ê´€ì„±ì„ ì–´ë–»ê²Œ ë³´ìž¥í• ê¹Œ?**

- **ì‚¬ê³  ê³¼ì •:**
    - **ê°•í•œ ì¼ê´€ì„±(Strong Consistency):** ìºì‹œì™€ DBì— ë™ì‹œì— ë°ì´í„°ë¥¼ ì¨ì„œ í•­ìƒ ì¼ê´€ì„±ì„ ìœ ì§€. ì¡°íšŒìˆ˜ ì‹œìŠ¤í…œì²˜ëŸ¼ ì“°ê¸° ìž‘ì—…ì´ ë¹ˆë²ˆí•œ ê²½ìš° ì„±ëŠ¥ ì €í•˜ê°€ ê·¹ì‹¬.
    - **ìµœì¢… ì¼ê´€ì„±(Eventual Consistency):** ì‹¤ì‹œê°„ìœ¼ë¡œëŠ” ë¶ˆì¼ì¹˜ë¥¼ í—ˆìš©í•˜ë˜, ìµœì¢…ì ìœ¼ë¡œëŠ” ë°ì´í„°ê°€ ì¼ì¹˜í•˜ë„ë¡ ë³´ìž¥. ì¡°íšŒìˆ˜ëŠ” ì‹¤ì‹œê°„ ì •í™•ë„ë³´ë‹¤ ìµœì¢… ì •í™•ì„±ì´ ë” ì¤‘ìš”.
- **ê²°ë¡ :** **ìµœì¢… ì¼ê´€ì„± ëª¨ë¸ì„ ì±„íƒí•©ë‹ˆë‹¤.**
    - Redisì—ì„œ ì‹¤ì‹œê°„ ì¡°íšŒë¥¼ ì²˜ë¦¬í•˜ê³ , 5ë¶„ë§ˆë‹¤ ë°°ì¹˜ ìž‘ì—…ìœ¼ë¡œ DBì— ë™ê¸°í™”í•©ë‹ˆë‹¤.
    - ìž¥ì• ë¡œ Redis ë°ì´í„°ê°€ ìœ ì‹¤ë  ê²½ìš°ë¥¼ ëŒ€ë¹„í•´, ë¡œê·¸ ê¸°ë°˜ì˜ ë³µêµ¬ ë©”ì»¤ë‹ˆì¦˜ì„ ë§ˆë ¨í•©ë‹ˆë‹¤.

### **ðŸ¤” í•µì‹¬ ì§ˆë¬¸ 4: Write-through vs Write-back vs Write-around ì¤‘ ì–´ë–¤ ì „ëžµ?**

- **ì‚¬ê³  ê³¼ì •:**
    - **Write-through:** ìºì‹œì™€ DBì— **ë™ì‹œì—** ì”€. ì¼ê´€ì„±ì€ ë†’ì§€ë§Œ ì“°ê¸° ì†ë„ê°€ DB ì†ë„ì— ë§žì¶°ì ¸ ëŠë¦¼.
    - **Write-back:** **ìºì‹œì—ë§Œ ë¨¼ì €** ì“°ê³ , íŠ¹ì • ì‹œì ì— ëª¨ì•„ì„œ DBì— ì”€. ì“°ê¸° ì†ë„ê°€ ë§¤ìš° ë¹ ë¥´ì§€ë§Œ, DBì— ì“°ê¸° ì „ ìºì‹œ ìž¥ì•  ì‹œ ë°ì´í„° ìœ ì‹¤ ìœ„í—˜.
    - **Write-around:** DBì—ë§Œ ì“°ê³ , ìºì‹œëŠ” ì½ì„ ë•Œ ì±„ì›€(Cache Miss). ì“°ê¸°ê°€ ë¹ˆë²ˆí•œ ì¡°íšŒìˆ˜ ì‹œìŠ¤í…œì—ëŠ” ë¶€ì í•©.
- **ê²°ë¡ :** **Write-back ì „ëžµì„ ì±„íƒí•©ë‹ˆë‹¤.**
    - ì¡°íšŒìˆ˜ì²˜ëŸ¼ ì“°ê¸°ê°€ ì••ë„ì ìœ¼ë¡œ ë§Žì€ ìž‘ì—…ì€ ì„±ëŠ¥ì´ ìµœìš°ì„ ìž…ë‹ˆë‹¤.
    - ì£¼ê¸°ì ì¸ ë°°ì¹˜ ë™ê¸°í™”ë¡œ DB ë¶€í•˜ë¥¼ ìµœì†Œí™”í•˜ê³ , Redisì˜ ì˜ì†ì„± ê¸°ëŠ¥ì„ í™œìš©í•˜ì—¬ ë°ì´í„° ìœ ì‹¤ ìœ„í—˜ì„ ìµœì†Œí™”í•©ë‹ˆë‹¤.

### **ðŸ¤” í•µì‹¬ ì§ˆë¬¸ 5: ìºì‹œ ë¬´íš¨í™” ì „ëžµì€?**

- **ì‚¬ê³  ê³¼ì •:**
    - ëª¨ë“  ì½˜í…ì¸ ì˜ ì¡°íšŒìˆ˜ë¥¼ ì˜êµ¬ì ìœ¼ë¡œ ìºì‹œì— ì €ìž¥í•˜ë©´ ë©”ëª¨ë¦¬ê°€ ë¬´í•œì • ì¦ê°€í•©ë‹ˆë‹¤. ë¹„í™œì„± ì½˜í…ì¸  ë°ì´í„°ëŠ” ìºì‹œì—ì„œ ì œê±°í•˜ì—¬ ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
    - **TTL(Time-To-Live) ê¸°ë°˜:** ì¼ì • ì‹œê°„ í›„ ìºì‹œê°€ ìžë™ ë§Œë£Œ. íŽ¸ë¦¬í•˜ì§€ë§Œ, í™œì„± ì½˜í…ì¸ ë„ ë§Œë£Œë˜ì–´ DB ì¡°íšŒë¥¼ ìœ ë°œí•  ìˆ˜ ìžˆìŒ.
    - **ìˆ˜ë™ ë¬´íš¨í™”:** ë°°ì¹˜ ì²˜ë¦¬ í›„ íŠ¹ì • ì¡°ê±´ì— ë”°ë¼ ì§ì ‘ ì‚­ì œ. ì •í™•í•˜ì§€ë§Œ ë¡œì§ì´ ë³µìž¡í•´ì§.
- **ê²°ë¡ :** **Look-aside íŒ¨í„´ì„ ê¸°ë³¸ìœ¼ë¡œ í•˜ë˜, TTLì„ ì•ˆì „ìž¥ì¹˜ë¡œ í™œìš©í•©ë‹ˆë‹¤.**
    - **í™œì„± ì½˜í…ì¸ :** ìµœê·¼ ì¡°íšŒëœ ì½˜í…ì¸ ëŠ” 7ì¼ì˜ TTLë¡œ Redisì— ìºì‹±í•©ë‹ˆë‹¤.
    - **ë¹„í™œì„± ì½˜í…ì¸ :** 7ì¼ê°„ ì¡°íšŒë˜ì§€ ì•Šì€ ì½˜í…ì¸ ëŠ” TTL ë§Œë£Œë¡œ ìžì—°ìŠ¤ëŸ½ê²Œ ìºì‹œì—ì„œ ì •ë¦¬ë©ë‹ˆë‹¤. ì´í›„ ë‹¤ì‹œ ì¡°íšŒë˜ë©´ DBì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì™€ ìºì‹œì— ì €ìž¥í•©ë‹ˆë‹¤ (Look-aside).
    - **ë°°ì¹˜ ì²˜ë¦¬:** 3ë¶„ë§ˆë‹¤ DBì— ë™ê¸°í™”í•  ë•Œ, ë™ê¸°í™” ëŒ€ìƒì´ ëœ í™œì„± ì½˜í…ì¸ ì˜ TTLì„ ë‹¤ì‹œ 7ì¼ë¡œ ê°±ì‹ í•´ì¤ë‹ˆë‹¤.
    - ì´ë¥¼ í†µí•´ ìžì£¼ ì¡°íšŒë˜ëŠ” ë°ì´í„°ë§Œ ìºì‹œì— ìœ ì§€í•˜ì—¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ì„ ìµœì í™”í•©ë‹ˆë‹¤.

### **ðŸŒŸ 2ë‹¨ê³„ì—ì„œ í‚¤ìš¸ ìˆ˜ ìžˆëŠ” ì—­ëŸ‰**

- **ìºì‹± ì „ëžµ:** ë‹¤ì–‘í•œ ìºì‹œ íŒ¨í„´(Write-back, Look-aside)ê³¼ íŠ¸ë ˆì´ë“œì˜¤í”„ì— ëŒ€í•œ ê¹Šì€ ì´í•´.
- **ì„±ëŠ¥ íŠœë‹:** ì‹œìŠ¤í…œì˜ ë³‘ëª©ì ì„ ì‹ë³„í•˜ê³ , ìºì‹œì™€ ê°™ì€ ê¸°ìˆ ë¡œ í•´ê²°í•˜ëŠ” ëŠ¥ë ¥.
- **ë°ì´í„° ì¼ê´€ì„±:** CAP ì´ë¡ ì„ ì‹¤ì œ ìƒí™©ì— ì ìš©í•˜ì—¬ ì¼ê´€ì„± ëª¨ë¸ì„ ì„ íƒí•˜ëŠ” ëŠ¥ë ¥.

---

### **3ë‹¨ê³„: ë¶„ì‚° ì‹œìŠ¤í…œ ì„¤ê³„ (ì´ˆë‹¹ 50,000ê±´ ì´ìƒ)**

**ëª©í‘œ:** ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ë¡œì˜ ì„±ìž¥ì„ ëŒ€ë¹„í•˜ì—¬ ì‹œìŠ¤í…œì„ **ìˆ˜í‰ì ìœ¼ë¡œ í™•ìž¥(Scale-out)**í•˜ê³ , ëŒ€ê·œëª¨ íŠ¸ëž˜í”½ì„ ì•ˆì •ì ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.

### **ðŸ¤” í•µì‹¬ ì§ˆë¬¸ 1: ì–´ë–»ê²Œ ìƒ¤ë”©í•  ê²ƒì¸ê°€? (content_id ê¸°ë°˜? ì§€ì—­ ê¸°ë°˜?)**

- **ì‚¬ê³  ê³¼ì •:**
    - **ë„ìž… ì‹œì :** ë‹¨ì¼ DB ìš©ëŸ‰ì´ 1TBì— ê·¼ì ‘í•˜ê±°ë‚˜, ì“°ê¸° TPSê°€ 1,000ì„ ì´ˆê³¼í•˜ì—¬ ë§ˆìŠ¤í„° DBì˜ ë¶€í•˜ê°€ ê°ë‹¹ì´ ì•ˆ ë  ë•Œ ìƒ¤ë”©ì„ ê³ ë ¤í•©ë‹ˆë‹¤.
    - **ìƒ¤ë”© í‚¤ ì„ íƒ:**
        - **content_id ê¸°ë°˜:** `content_id % N` ë°©ì‹ì€ íŠ¹ì • ì½˜í…ì¸ (í•« ì½˜í…ì¸ )ì— íŠ¸ëž˜í”½ì´ ëª°ë¦´ ë•Œ í•´ë‹¹ ìƒ¤ë“œë§Œ ê³¼ë¶€í•˜ì— ê±¸ë¦¼.
        - **ì§€ì—­ ê¸°ë°˜:** ì‚¬ìš©ìž ìœ„ì¹˜ ê¸°ë°˜ ìƒ¤ë”©ì€ ì§€ì—­ë³„ íŠ¸ëž˜í”½ íŽ¸ì°¨ê°€ ì‹¬í•´ ê· ë“± ë¶„ë°°ê°€ ì–´ë ¤ì›€.
        - **ì‹œê°„ ê¸°ë°˜:** ìƒì„± ì‹œê°„ ê¸°ì¤€ ìƒ¤ë”©ì€ ìµœì‹  ì½˜í…ì¸ ì—ë§Œ íŠ¸ëž˜í”½ì´ ì§‘ì¤‘ë¨.
- **ê²°ë¡ :** **`content_id` ê¸°ë°˜ì˜ í•´ì‹œ ìƒ¤ë”©(Hash Sharding)ì„ ê¸°ë³¸ìœ¼ë¡œ ì±„íƒí•˜ê³ , í•« ì½˜í…ì¸ ëŠ” ë³„ë„ ëŒ€ì‘í•©ë‹ˆë‹¤.**
    - **ì“°ê¸° (ì›ë³¸ ì €ìž¥)ëŠ” 'ì½˜í…ì¸  ID ê¸°ë°˜ ìƒ¤ë”©'ìœ¼ë¡œ**
        - ì˜ìƒ ì›ë³¸ íŒŒì¼, ë©”íƒ€ë°ì´í„°, ëŒ“ê¸€, **ì „ ì„¸ê³„ ì´ì¡°íšŒìˆ˜**ì™€ ê°™ì€ 'ë§ˆìŠ¤í„° ë°ì´í„°'ëŠ” **ì½˜í…ì¸  ID í•´ì‹œ ìƒ¤ë”©**ì„ í†µí•´ ì „ ì„¸ê³„ì— ë¶„ì‚°ëœ íŠ¹ì • ìƒ¤ë“œ DBì— ì €ìž¥í•©ë‹ˆë‹¤. ì´ê²ƒì´ ë°ì´í„°ì˜ ìœ ì¼í•œ 'ì›ë³¸'ì´ ë©ë‹ˆë‹¤.
    - **ì½ê¸° (ì‚¬ìš©ìž ê²½í—˜)ëŠ” 'ì§€ì—­ë³„ ìºì‹œ/CDN'ìœ¼ë¡œ**
        - ë¯¸êµ­ ì‚¬ìš©ìžê°€ í•œêµ­ì— ì›ë³¸ì´ ìžˆëŠ” ì˜ìƒì„ ìš”ì²­í•˜ë©´, ì‹œìŠ¤í…œì€ ì²˜ìŒ í•œ ë²ˆë§Œ í•œêµ­ DBì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.
        - ê·¸ë¦¬ê³  ê°€ì ¸ì˜¨ ì˜ìƒ íŒŒì¼ê³¼ ì¡°íšŒìˆ˜ ê°™ì€ ë°ì´í„°ë¥¼ **ë¯¸êµ­ì— ìžˆëŠ” ìºì‹œ ì„œë²„ë‚˜ CDN ì—£ì§€ ì„œë²„ì— ë³µì œ**í•´ ë‘¡ë‹ˆë‹¤.
        - ì´í›„ ë‹¤ë¥¸ ë¯¸êµ­ ì‚¬ìš©ìžë“¤ì´ ê°™ì€ ì˜ìƒì„ ìš”ì²­í•˜ë©´, ë” ì´ìƒ í•œêµ­ê¹Œì§€ ì˜¤ì§€ ì•Šê³  ê°€ê¹Œìš´ ë¯¸êµ­ ìºì‹œ ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ë°”ë¡œ ì½ì–´ê°‘ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ **ì§€ì—­ ê¸°ë°˜ ìƒ¤ë”©ì˜ 'ë¹ ë¥¸ ì‘ë‹µ ì†ë„' ìž¥ì ì„ ê·¸ëŒ€ë¡œ** ëˆ„ë¦´ ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
    - **í•« ì½˜í…ì¸  ë¬¸ì œ ëŒ€ì‘:** íŠ¹ì • ì½˜í…ì¸ ì— íŠ¸ëž˜í”½ì´ ëª°ë¦¬ë©´, í•´ë‹¹ ì½˜í…ì¸ ì˜ ì¡°íšŒìˆ˜ ì¹´ìš´í„°ë¥¼ ë³„ë„ì˜ ì „ìš© Redis í´ëŸ¬ìŠ¤í„°ì— ë³µì œí•˜ì—¬ ë¶€í•˜ë¥¼ ë¶„ì‚°ì‹œí‚µë‹ˆë‹¤.

### **ðŸ¤” í•µì‹¬ ì§ˆë¬¸ 2: ìˆœê°„ì ì¸ íŠ¸ëž˜í”½ í­ì¦(Spike)ì— ì–´ë–»ê²Œ ëŒ€ì‘í•  ê²ƒì¸ê°€?**

- **ì‚¬ê³  ê³¼ì •:**
    1. **ë¬¸ì œì  ë¶„ì„:** ë°”ì´ëŸ´ ì½˜í…ì¸  ë°œìƒ ì‹œ í‰ì†Œì˜ ìˆ˜ë°± ë°°ì— ë‹¬í•˜ëŠ” íŠ¸ëž˜í”½ì´ ëª°ë¦¬ë©´, ë™ê¸° ì²˜ë¦¬ ë°©ì‹ìœ¼ë¡œëŠ” API ì„œë²„, Redis, DB ì¤‘ í•˜ë‚˜ê°€ ë‹¤ìš´ë˜ê³  ì—°ì‡„ ìž¥ì• ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì²˜ë¦¬ ì¤‘ì´ë˜ ìš”ì²­ì€ ëª¨ë‘ ìœ ì‹¤ë©ë‹ˆë‹¤.
    2. **ë²„í¼ì˜ í•„ìš”ì„±:** ê¸‰ì¦í•œ ìš”ì²­ì„ ìž„ì‹œë¡œ ì•ˆì „í•˜ê²Œ ë³´ê´€í•˜ê³ , ë°±ì—”ë“œ ì‹œìŠ¤í…œì´ ê°ë‹¹í•  ìˆ˜ ìžˆëŠ” ì†ë„ë¡œ ì ì§„ì ìœ¼ë¡œ ì²˜ë¦¬í•  ì¤‘ê°„ ë‹¤ë¦¬(ë²„í¼)ê°€ í•„ìš”í•©ë‹ˆë‹¤.
    3. **ë©”ì‹œì§€ í ê¸°ìˆ  ê²€í† :**
        - **Redis Pub/Sub:** ì´ë¯¸ ì‚¬ìš© ì¤‘ì´ë¼ ë„ìž…ì´ ì‰½ê³  ì§€ì—°ì‹œê°„ì´ ê±°ì˜ ì—†ì§€ë§Œ, ë©”ì‹œì§€ ì˜ì†ì„±ì´ ì—†ì–´ ì„œë²„ ìž¬ì‹œìž‘ ì‹œ ë°ì´í„°ê°€ ìœ ì‹¤ë©ë‹ˆë‹¤. ì¡°íšŒìˆ˜ ë°ì´í„° ìœ ì‹¤ ìœ„í—˜ìœ¼ë¡œ ë¶€ì í•©.
        - **RabbitMQ:** ì„¤ì •ì´ ê°„ë‹¨í•˜ê³  ë‹¤ì–‘í•œ ë¼ìš°íŒ… íŒ¨í„´ì„ ì§€ì›í•˜ì§€ë§Œ, ì²˜ë¦¬ëŸ‰ì— í•œê³„(ì´ˆë‹¹ ~10ë§Œ)ê°€ ìžˆì–´ ë°”ì´ëŸ´ íŠ¸ëž˜í”½ í­ì¦ ì‹œ ë³‘ëª©ì´ ë  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.
        - **AWS SQS:** ì™„ì „ ê´€ë¦¬í˜•ì´ë¼ ìš´ì˜ ë¶€ë‹´ì´ ì—†ì§€ë§Œ, ë©”ì‹œì§€ë‹¹ ê³¼ê¸ˆ ë°©ì‹ì´ë¼ ëŒ€ìš©ëŸ‰ íŠ¸ëž˜í”½ ë°œìƒ ì‹œ ë¹„ìš©ì´ ê¸‰ì¦í•  ìˆ˜ ìžˆìœ¼ë©°, ì§€ì—°ì‹œê°„ì´ ìƒëŒ€ì ìœ¼ë¡œ ê¹€.
        - **Apache Kafka:** ë””ìŠ¤í¬ ìˆœì°¨ ì“°ê¸°ì— ìµœì í™”ë˜ì–´ **ì´ˆë‹¹ ìˆ˜ë°±ë§Œ ë©”ì‹œì§€**ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìžˆëŠ” ì••ë„ì ì¸ ì²˜ë¦¬ëŸ‰ì„ ê°€ì§‘ë‹ˆë‹¤. ë©”ì‹œì§€ ìˆ˜ì™€ ë¬´ê´€í•œ ì„œë²„ ë¹„ìš© êµ¬ì¡°ë¡œ ëŒ€ìš©ëŸ‰ì— ê²½ì œì ì´ë©°, ë””ìŠ¤í¬ì— ë¡œê·¸ë¥¼ ì €ìž¥í•˜ì—¬ **ë°ì´í„° ì˜ì†ì„±**ì„ ë³´ìž¥í•©ë‹ˆë‹¤. íŒŒí‹°ì…”ë‹ì„ í†µí•´ ë¬´í•œí•œ í™•ìž¥ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.
- **ê²°ë¡ :** **Kafkaë¥¼ ë„ìž…í•˜ì—¬ ë¹„ë™ê¸° ì²˜ë¦¬ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•©ë‹ˆë‹¤.**
    - **ì•„í‚¤í…ì²˜:** `ì‚¬ìš©ìž ìš”ì²­ â†’ API ì„œë²„ â†’ Kafka Topic (ë²„í¼ë§) â†’ ì¡°íšŒìˆ˜ ì²˜ë¦¬ ì›Œì»¤ë“¤ â†’ Redis/DB`
    - **ë„ìž… íš¨ê³¼:**
        1. **ë¹„ë™ê¸° ì²˜ë¦¬ & ì„±ëŠ¥ í–¥ìƒ:** API ì„œë²„ëŠ” ìš”ì²­ì„ Kafkaì— ì €ìž¥í•œ í›„ ì¦‰ì‹œ(2ms ì´ë‚´) ì‚¬ìš©ìžì—ê²Œ ì‘ë‹µí•˜ì—¬ ë¹ ë¥¸ ì‚¬ìš©ìž ê²½í—˜ì„ ì œê³µ.
        2. **ë””ì»¤í”Œë§ & ì•ˆì •ì„±:** API ì„œë²„ì™€ ë°±ì—”ë“œ ì²˜ë¦¬ ë¡œì§ì„ ë¶„ë¦¬. Redisë‚˜ DBì— ìž¥ì• ê°€ ë°œìƒí•´ë„ API ì„œë²„ëŠ” ì •ìƒì ìœ¼ë¡œ ìš”ì²­ì„ ë°›ì„ ìˆ˜ ìžˆìŒ (ìž¥ì•  ê²©ë¦¬).
        3. **ë°ì´í„° ë³´ìž¥:** Kafkaê°€ ë©”ì‹œì§€ë¥¼ ë””ìŠ¤í¬ì— ë³´ê´€í•˜ë¯€ë¡œ, ì›Œì»¤ì— ìž¥ì• ê°€ ë°œìƒí•´ë„ ìž¬ì‹œìž‘ í›„ ë‚¨ì€ ë©”ì‹œì§€ë¥¼ ì²˜ë¦¬í•˜ì—¬ ë°ì´í„° ìœ ì‹¤ì„ ë°©ì§€ (At-least-once ë³´ìž¥).

### **ðŸŒŸ 3ë‹¨ê³„ì—ì„œ í‚¤ìš¸ ìˆ˜ ìžˆëŠ” ì—­ëŸ‰**

- **ë¶„ì‚° ì‹œìŠ¤í…œ ì„¤ê³„:** ìƒ¤ë”©, ë³µì œ, íŒŒí‹°ì…”ë‹ ë“± ëŒ€ìš©ëŸ‰ ë°ì´í„° ë¶„ì‚° ì²˜ë¦¬ ì „ëžµ ìˆ˜ë¦½ ëŠ¥ë ¥.
- **ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬:** Kafkaì™€ ê°™ì€ ë„êµ¬ë¥¼ í™œìš©í•˜ì—¬ ì‹¤ì‹œê°„ ë°ì´í„° íŒŒì´í”„ë¼ì¸ì„ ì„¤ê³„í•˜ëŠ” ëŠ¥ë ¥.
- **ê¸€ë¡œë²Œ ì•„í‚¤í…ì²˜:** ë‹¤ì¤‘ ë°ì´í„° ì„¼í„°, CDN, ë„¤íŠ¸ì›Œí¬ ì§€ì—° ë“±ì„ ê³ ë ¤í•œ ê¸€ë¡œë²Œ ì„œë¹„ìŠ¤ ì„¤ê³„ ëŠ¥ë ¥.

---

---

**MySQL**

```mermaid
erDiagram
    USERS {
        bigint user_id PK "ì‚¬ìš©ìž ID"
        varchar username "ì‚¬ìš©ìž ì´ë¦„"
        varchar email "ì´ë©”ì¼"
        timestamp created_at "ê°€ìž…ì¼"
    }

    VIDEOS {
        bigint video_id PK "ì˜ìƒ ID"
        bigint uploader_id FK "ì—…ë¡œë” ID"
        varchar title "ì˜ìƒ ì œëª©"
        text description "ì˜ìƒ ì„¤ëª…"
        bigint total_view_count "ì´ ì¡°íšŒìˆ˜ (ê³µì‹ ì§‘ê³„)"
        timestamp uploaded_at "ì—…ë¡œë“œ ì‹œê°„"
    }

    USERS ||--o{ VIDEOS : "ì—…ë¡œë“œ"
```

**NoSQL**

```mermaid
erDiagram
    USER_ACTIVITY_LOGS {
        varchar row_key PK "í–‰ í‚¤ (e.g., videoId#timestamp)"
        bigint video_id "ì˜ìƒ ID"
        bigint user_id "ì‚¬ìš©ìž ID"
        varchar event_type "'VIEW', 'LIKE', 'COMMENT'"
        timestamp event_timestamp "ì´ë²¤íŠ¸ ë°œìƒ ì‹œê°„"
        varchar event_details_json "ì´ë²¤íŠ¸ ìƒì„¸ ì •ë³´ (e.g., ëŒ“ê¸€ ë‚´ìš©)"
    }

    VIDEO_HOURLY_STATS {
        varchar row_key PK "í–‰ í‚¤ (e.g., videoId#YYYYMMDDHH)"
        bigint video_id "ì˜ìƒ ID"
        int view_count "ì‹œê°„ë‹¹ ì¡°íšŒìˆ˜"
        int like_count "ì‹œê°„ë‹¹ ì¢‹ì•„ìš” ìˆ˜"
    }

    VIDEO_DAILY_STATS {
        varchar row_key PK "í–‰ í‚¤ (e.g., videoId#YYYYMMDD)"
        bigint video_id "ì˜ìƒ ID"
        int view_count "ì¼ê°„ ì¡°íšŒìˆ˜"
        int like_count "ì¼ê°„ ì¢‹ì•„ìš” ìˆ˜"
        int comment_count "ì¼ê°„ ëŒ“ê¸€ ìˆ˜"
    }
```

### **4ë‹¨ê³„: ë°ì´í„° í™œìš© - í†µê³„ ë° ëž­í‚¹ ì‹œìŠ¤í…œ ì„¤ê³„**

**ëª©í‘œ:** ìˆ˜ì§‘ëœ ë°ì´í„°ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°€ê³µí•˜ì—¬ ë¹„ì¦ˆë‹ˆìŠ¤ ê°€ì¹˜ë¥¼ ì°½ì¶œí•˜ëŠ” í†µê³„ ë° ëž­í‚¹ ê¸°ëŠ¥ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

### **ðŸ¤” í•µì‹¬ ì§ˆë¬¸ 1: ì‹œê°„/ì¼/ì£¼ë³„ í†µê³„ëŠ” ì–´ë–»ê²Œ ë§Œë“¤ê¹Œ? ðŸ“Š**

- **ë¬¸ì œ:** ìˆ˜ì‹­ì–µ ê±´ì˜ ì›ë³¸ ë¡œê·¸ í…Œì´ë¸”ì— ì§ì ‘ `GROUP BY` ì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒì€ DBë¥¼ ë§ˆë¹„ì‹œí‚¤ëŠ” í–‰ìœ„ìž…ë‹ˆë‹¤.
- **ê²°ë¡ :** **ìŠ¤íŠ¸ë¦¼ í”„ë¡œì„¸ì„œ(Stream Processor)ë¥¼ ë„ìž…í•˜ì—¬ ì‹¤ì‹œê°„ìœ¼ë¡œ ì§‘ê³„í•©ë‹ˆë‹¤.**
    - **ë°ì´í„° íë¦„:** `Kafka ì´ë²¤íŠ¸ â†’ ìŠ¤íŠ¸ë¦¼ í”„ë¡œì„¸ì„œ(Flink, Spark Streaming ë“±) â†’ í†µê³„ìš© DB(OLAP, Data Warehouse)`
    - Kafkaì˜ ì¡°íšŒìˆ˜ ì´ë²¤íŠ¸ ìŠ¤íŠ¸ë¦¼ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ ì½ì–´ì™€ ì‹œê°„ ë‹¨ìœ„(Tumbling Window)ë¡œ ì§‘ê³„í•˜ê³ , ê·¸ ê²°ê³¼ë§Œ í†µê³„ DBì— ì €ìž¥í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì›ë³¸ DB ë¶€í•˜ ì—†ì´ ê±°ì˜ ì‹¤ì‹œê°„ í†µê³„ ëŒ€ì‹œë³´ë“œë¥¼ ì œê³µí•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

### **ðŸ¤” í•µì‹¬ ì§ˆë¬¸ 2: ì‹¤ì‹œê°„ ì¸ê¸° ì½˜í…ì¸  ëž­í‚¹ì€ ì–´ë–»ê²Œ êµ¬í˜„í• ê¹Œ? ðŸ†**

- **ë¬¸ì œ:** ìˆ˜ë°±ë§Œ ê°œì˜ ì½˜í…ì¸  ì¤‘ ìƒìœ„ ëž­í‚¹ì„ DB `ORDER BY` ì¿¼ë¦¬ë¡œ ì¡°íšŒí•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. ë˜í•œ, ëª¨ë“  ì˜ìƒì„ í•˜ë‚˜ì˜ ëž­í‚¹ ë¦¬ìŠ¤íŠ¸ì—ì„œ ê´€ë¦¬í•˜ëŠ” ê²ƒì€ ë©”ëª¨ë¦¬ ë° ì—°ì‚° ë‚­ë¹„ê°€ ì‹¬í•©ë‹ˆë‹¤.
- **ê²°ë¡ : 'ì‚¬ì „ í•„í„°ë§'ê³¼ 'ìƒ¤ë”©ëœ Redis Sorted Set'ì„ í™œìš©í•˜ì—¬ ìµœì í™”í•©ë‹ˆë‹¤.**
    1. **í›„ë³´êµ° í•„í„°ë§ (Candidate Filtering):**
        - ëª¨ë“  ì˜ìƒì„ ëŒ€ìƒìœ¼ë¡œ í•˜ì§€ ì•Šê³ , **ìµœê·¼ 24ì‹œê°„ ë‚´ ì—…ë¡œë“œ**ë˜ì—ˆê±°ë‚˜ **ìµœê·¼ 1ì‹œê°„ ë‚´ ë°˜ì‘ì´ ìžˆëŠ”** ì˜ìƒ ë“± ì†Œìˆ˜ì˜ ìœ íš¨ í›„ë³´êµ°(ì „ì²´ì˜ 0.1% ë¯¸ë§Œ)ë§Œ ì„ ë³„í•˜ì—¬ ì—°ì‚° ëŒ€ìƒì„ ìµœì†Œí™”í•©ë‹ˆë‹¤.
    2. **Sorted Set ìƒ¤ë”© (Sharding):**
        - ì„ ë³„ëœ í›„ë³´ë“¤ì„ í•˜ë‚˜ì˜ ê±°ëŒ€í•œ Sorted Setì´ ì•„ë‹Œ, **ì§€ì—­(`ranking:kr`) ë° ì¹´í…Œê³ ë¦¬(`ranking:kr:game`)**ë³„ë¡œ ë¶„ë¦¬ëœ ì—¬ëŸ¬ ê°œì˜ ìž‘ì€ Sorted Setì— ì €ìž¥í•˜ì—¬ ë¶€í•˜ë¥¼ ë¶„ì‚°í•˜ê³  ì¡°íšŒë¥¼ ìµœì í™”í•©ë‹ˆë‹¤.
    3. **ìµœì¢… ëž­í‚¹ ì•„í‚¤í…ì²˜:**
        - **ë°ì´í„° íë¦„:** `Kafka Events â†’ ìŠ¤íŠ¸ë¦¼ í”„ë¡œì„¸ì„œ â†’ (1) í›„ë³´êµ° í•„í„°ë§ â†’ (2) ì§€ì—­/ì¹´í…Œê³ ë¦¬ë³„ ì ìˆ˜ ê³„ì‚° â†’ (3) ìƒ¤ë”©ëœ Redis Sorted Setsì— ZADD`
        - **ì¡°íšŒ:** ì‚¬ìš©ìžê°€ 'í•œêµ­ ê²Œìž„ ëž­í‚¹'ì„ ìš”ì²­í•˜ë©´, ì• í”Œë¦¬ì¼€ì´ì…˜ì€ `ranking:kr:game` Sorted Setì— `ZREVRANGE` ëª…ë ¹ì–´ë¥¼ ë³´ë‚´ ìƒìœ„ ëž­ì»¤ë¥¼ ë§¤ìš° ë¹ ë¥´ê²Œ ì¡°íšŒí•©ë‹ˆë‹¤.

---

# ë‹¤ë¥¸ ì‚¬ëžŒë“¤ ë°œí‘œë¥¼ ë“£ê³  ì•Œê²Œëœ ì‚¬ì‹¤ë“¤

### 1. ë ˆë””ìŠ¤ ë¶€í•˜ë¥¼ ëœê¸° ìœ„í•œ CDN ì‚¬ìš©

ë‹¨ìˆœížˆ "ìºì‹œë¥¼ ì•žì— ë‘”ë‹¤"ëŠ” í‘œë©´ì ì¸ ì˜ë¯¸ë¥¼ ë„˜ì–´, CDNì´ Redisì˜ ë¶€í•˜ë¥¼ ì¤„ì´ëŠ” ì›ë¦¬ëŠ” **'ìºì‹œì˜ ê³„ì¸µí™”(Tiered Caching)'** ì™€ **'ìš”ì²­ì˜ ì§€ì—­í™”(Request Localization)'** ì— ìžˆìŠµë‹ˆë‹¤.

### ðŸ§ **í•µì‹¬ ì•„ì´ë””ì–´: "ëª¨ë“  ìœ ì €ê°€ Redisê¹Œì§€ ì˜¬ í•„ìš”ê°€ ì—†ë‹¤"**

RedisëŠ” ë§¤ìš° ë¹ ë¥´ì§€ë§Œ, ê²°êµ­ **ì¤‘ì•™ ì§‘ì¤‘í™”ëœ í•œì •ëœ ìžì›**ìž…ë‹ˆë‹¤. ì „ ì„¸ê³„ ìˆ˜ë°±ë§Œ ëª…ì˜ ì‚¬ìš©ìžê°€ ì¸ê¸° ë™ì˜ìƒ ëž­í‚¹ì„ 1ì´ˆë§ˆë‹¤ ì¡°íšŒí•œë‹¤ë©´, ê·¸ ìš”ì²­ì€ ëª¨ë‘ ì—¬ëŸ¬ë¶„ì˜ ë°ì´í„° ì„¼í„°ì— ìžˆëŠ” Redis í´ëŸ¬ìŠ¤í„°ë¡œ ì§‘ì¤‘ë©ë‹ˆë‹¤. ì´ëŠ” ë„¤íŠ¸ì›Œí¬ ëŒ€ì—­í­, Redisì˜ CPU ë° ë©”ëª¨ë¦¬ì— ì—„ì²­ë‚œ ë¶€í•˜ë¥¼ ì¤ë‹ˆë‹¤.

CDN(Content Delivery Network)ì€ ì´ ìš”ì²­ì˜ 99%ë¥¼ **ì‚¬ìš©ìžì™€ ê°€ìž¥ ê°€ê¹Œìš´ ë¬¼ë¦¬ì  ìœ„ì¹˜ì— ìžˆëŠ” 'ì—£ì§€ ì„œë²„(Edge Server)'ê°€ ëŒ€ì‹  ì²˜ë¦¬**í•˜ë„ë¡ í•˜ëŠ” ë°©íŒ¨ë§‰ ì—­í• ì„ í•©ë‹ˆë‹¤.

### **ì‹¬ì¸µ ë™ìž‘ ì›ë¦¬**

1. **ìµœì´ˆì˜ ìš”ì²­ (Cache Miss):**
    - í•œêµ­ì˜ í•œ ì‚¬ìš©ìžê°€ 'ì‹¤ì‹œê°„ ì¸ê¸° ë™ì˜ìƒ ëž­í‚¹' API (`/api/v1/trending`)ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.
    - DNSëŠ” ì‚¬ìš©ìžì™€ ê°€ìž¥ ê°€ê¹Œìš´ í•œêµ­ì˜ CDN ì—£ì§€ ì„œë²„ë¡œ ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.
    - ì—£ì§€ ì„œë²„ì—ëŠ” í•´ë‹¹ API ì‘ë‹µ ìºì‹œê°€ ì—†ìœ¼ë¯€ë¡œ(**Cache Miss**), ì›ë³¸ ì„œë²„(Origin Server, ì¦‰ ì—¬ëŸ¬ë¶„ì˜ ë°±ì—”ë“œ ì„œë²„)ë¡œ ìš”ì²­ì„ ì „ë‹¬í•©ë‹ˆë‹¤.
    - ë°±ì—”ë“œ ì„œë²„ëŠ” Redisì˜ Sorted Setì—ì„œ ëž­í‚¹ ë°ì´í„°ë¥¼ ì¡°íšŒí•˜ì—¬ JSON í˜•íƒœë¡œ ì‘ë‹µí•©ë‹ˆë‹¤.
    - ì´ë•Œ **í•µì‹¬ì€ HTTP ì‘ë‹µ í—¤ë”**ì— ìºì‹œ ì •ì±…ì„ ëª…ì‹œí•˜ëŠ” ê²ƒìž…ë‹ˆë‹¤: `Cache-Control: public, max-age=60`
        - `public`: ì¤‘ê°„ í”„ë¡ì‹œ(CDN ë“±)ê°€ ì´ ì‘ë‹µì„ ìºì‹œí•´ë„ ì¢‹ë‹¤ëŠ” ì˜ë¯¸ìž…ë‹ˆë‹¤.
        - `max-age=60`: ì´ ì‘ë‹µì„ 60ì´ˆ ë™ì•ˆ ìœ íš¨í•œ ê²ƒìœ¼ë¡œ ê°„ì£¼í•˜ë¼ëŠ” ì˜ë¯¸ìž…ë‹ˆë‹¤.
2. **ìºì‹œ ì €ìž¥ (Cache Population):**
    - í•œêµ­ CDN ì—£ì§€ ì„œë²„ëŠ” ë°±ì—”ë“œë¡œë¶€í„° ë°›ì€ JSON ì‘ë‹µê³¼ `max-age=60` í—¤ë”ë¥¼ í•¨ê»˜ ìžì‹ ì˜ ë””ìŠ¤í¬/ë©”ëª¨ë¦¬ì— ì €ìž¥í•©ë‹ˆë‹¤.
3. **ì´í›„ì˜ ëª¨ë“  ìš”ì²­ (Cache Hit):**
    - ë‹¤ìŒ 60ì´ˆ ë™ì•ˆ, í•œêµ­ì— ìžˆëŠ” **ë‹¤ë¥¸ ëª¨ë“  ì‚¬ìš©ìž**ê°€ ë™ì¼í•œ `/api/v1/trending` APIë¥¼ ìš”ì²­í•˜ë©´, CDN ì—£ì§€ ì„œë²„ëŠ” ì›ë³¸ ì„œë²„ì— ë¬»ì§€ë„ ì•Šê³  ìžì‹ ì´ ì €ìž¥í•´ ë‘” JSON ì‘ë‹µì„ ì¦‰ì‹œ ë°˜í™˜í•©ë‹ˆë‹¤(**Cache Hit**).
    - **ê²°ê³¼ì ìœ¼ë¡œ, ì´ 60ì´ˆ ë™ì•ˆ Redisì™€ ë°±ì—”ë“œ ì„œë²„ëŠ” ë‹¨ í•œ ë²ˆì˜ ìš”ì²­ë„ ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤.** ìˆ˜ì²œ, ìˆ˜ë§Œ ê±´ì˜ ìš”ì²­ì´ CDN ì„ ì—ì„œ ëª¨ë‘ ì°¨ë‹¨(ì²˜ë¦¬)ëœ ê²ƒìž…ë‹ˆë‹¤.

### ðŸŽ¯ **ì¡°íšŒìˆ˜ ì‹œìŠ¤í…œì—ì„œì˜ êµ¬ì²´ì  í™œìš©**

- **ëŒ€ìƒ**: **ì½ê¸°(Read)ê°€ ë§¤ìš° ë¹ˆë²ˆ**í•˜ê³ , **ë°ì´í„° ë³€ê²½ ì£¼ê¸°ê°€ ë¹„êµì  ê¸¸ë©°(ìˆ˜ì‹­ ì´ˆ ~ ìˆ˜ ë¶„)**, **ëª¨ë“  ì‚¬ìš©ìžì—ê²Œ ë™ì¼í•˜ê²Œ ë³´ì´ëŠ”** ë°ì´í„°. (e.g., ì¸ê¸° ë™ì˜ìƒ ëž­í‚¹, ì§‘ê³„ëœ ì´ ì¡°íšŒìˆ˜)
- **ë¹„ëŒ€ìƒ**: ê°œì¸í™”ëœ ë°ì´í„° (e.g., ë‚˜ì˜ êµ¬ë… ì±„ë„ ëª©ë¡), ì‹¤ì‹œê°„ìœ¼ë¡œ ìžì£¼ ë°”ë€Œì–´ì•¼ í•˜ëŠ” ë°ì´í„°, ì“°ê¸°(Write) ìš”ì²­.

> ê²°ë¡ : CDNì€ Redisë¥¼ ëŒ€ì²´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, Redisì˜ ì•žë‹¨ì—ì„œ ë¶ˆí•„ìš”í•œ ì½ê¸° íŠ¸ëž˜í”½ì„ í¡ìˆ˜í•˜ëŠ” ê±°ëŒ€í•œ ê¸€ë¡œë²Œ ë¶„ì‚° ìºì‹œ ê³„ì¸µìž…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ RedisëŠ” ì†Œìˆ˜ì˜ ì“°ê¸°(Write) ìš”ì²­ê³¼ CDNì´ ê°±ì‹ í•´ì•¼ í•˜ëŠ” ê·¹ì†Œìˆ˜ì˜ ì½ê¸°(Read) ìš”ì²­ ì²˜ë¦¬ì—ë§Œ ì§‘ì¤‘í•  ìˆ˜ ìžˆê²Œ ë˜ì–´, ì „ì²´ ì‹œìŠ¤í…œì˜ ì•ˆì •ì„±ê³¼ ì„±ëŠ¥ì´ ê·¹ëŒ€í™”ë©ë‹ˆë‹¤.
> 

---

### 2. ClickHouse (í´ë¦­í•˜ìš°ìŠ¤)

ClickHouseëŠ” "MySQLë³´ë‹¤ ë¹ ë¥¸ DB"ê°€ ì•„ë‹™ë‹ˆë‹¤. ì• ì´ˆì— ëª©ì ê³¼ ë‚´ë¶€ êµ¬ì¡°ê°€ ì™„ì „ížˆ ë‹¤ë¥¸, **OLAP(Online Analytical Processing, ì˜¨ë¼ì¸ ë¶„ì„ ì²˜ë¦¬)** ë¥¼ ìœ„í•´ íƒœì–´ë‚œ **ì»¬ëŸ¼ ê¸°ë°˜(Column-Oriented)** ë°ì´í„°ë² ì´ìŠ¤ìž…ë‹ˆë‹¤.

### ðŸ§ **í•µì‹¬ ì•„ì´ë””ì–´: "í–‰(Row)ì´ ì•„ë‹Œ ì—´(Column) ë‹¨ìœ„ë¡œ ìƒê°í•œë‹¤"**

- **MySQL (OLTP, Row-based):** `ì‚¬ìš©ìž í•œ ëª…ì˜ ëª¨ë“  ì •ë³´(ID, ì´ë¦„, ì´ë©”ì¼, ì£¼ì†Œ)`ë¥¼ í•œ ë©ì–´ë¦¬ë¡œ ë””ìŠ¤í¬ì— ì €ìž¥í•©ë‹ˆë‹¤. `UPDATE a user's address` ê°™ì€ ìž‘ì—…ì— ìµœì í™”ë˜ì–´ ìžˆìŠµë‹ˆë‹¤.
- **ClickHouse (OLAP, Column-based):** `ëª¨ë“  ì‚¬ìš©ìžì˜ ID ëª©ë¡`, `ëª¨ë“  ì‚¬ìš©ìžì˜ ì´ë¦„ ëª©ë¡`, `ëª¨ë“  ì‚¬ìš©ìžì˜ ì´ë©”ì¼ ëª©ë¡`ì„ ê°ê° ë³„ë„ì˜ íŒŒì¼ë¡œ ì €ìž¥í•©ë‹ˆë‹¤.

### **ì‹¬ì¸µ ë™ìž‘ ì›ë¦¬: ì™œ ë¶„ì„ ì¿¼ë¦¬ê°€ ì••ë„ì ìœ¼ë¡œ ë¹ ë¥¸ê°€?**

1. **ì»¬ëŸ¼ ê¸°ë°˜ ì €ìž¥ (Columnar Storage):**
    - **ì§ˆë¬¸:** "ì§€ë‚œ í•œ ë‹¬ê°„ ëª¨ë“  ë™ì˜ìƒì˜ **í‰ê·  ì¡°íšŒìˆ˜**ì™€ **ì´ ì‹œì²­ ì‹œê°„**ì€?"
    - **MySQL:** ìˆ˜ì‹­ì–µ ê±´ì˜ ë™ì˜ìƒ ë°ì´í„°ë¥¼ **í–‰ ë‹¨ìœ„ë¡œ ëª¨ë‘** ë””ìŠ¤í¬ì—ì„œ ì½ì–´ì˜¨ í›„, ë©”ëª¨ë¦¬ì—ì„œ `view_count`ì™€ `duration` í•„ë“œë§Œ ë½‘ì•„ë‚´ì•¼ í•©ë‹ˆë‹¤. ì œëª©, ì„¤ëª… ë“± ë¶ˆí•„ìš”í•œ ë°ì´í„°ê¹Œì§€ ì½ëŠë¼ I/O ë‚­ë¹„ê°€ ê·¹ì‹¬í•©ë‹ˆë‹¤.
    - **ClickHouse:** ë””ìŠ¤í¬ì—ì„œ `view_count` ì»¬ëŸ¼ íŒŒì¼ê³¼ `duration` ì»¬ëŸ¼ íŒŒì¼, **ë‹¨ ë‘ ê°œë§Œ ì½ìŠµë‹ˆë‹¤.** ë‹¤ë¥¸ ì»¬ëŸ¼ì€ ì•„ì˜ˆ ê±´ë“œë¦¬ì§€ë„ ì•Šìœ¼ë¯€ë¡œ I/Oê°€ ìˆ˜ì‹­ ë°°ì—ì„œ ìˆ˜ë°± ë°°ê¹Œì§€ ì¤„ì–´ë“­ë‹ˆë‹¤.
2. **ì••ë„ì ì¸ ë°ì´í„° ì••ì¶•ë¥ :**
    - ê°™ì€ íƒ€ìž…ì˜ ë°ì´í„°ê°€ ì—°ì†ìœ¼ë¡œ ëª¨ì—¬ìžˆìœ¼ë©´ (e.g., ìˆ«ìžë§Œ ì­‰, êµ­ê°€ ì½”ë“œë§Œ ì­‰) ì••ì¶• íš¨ìœ¨ì´ ê·¹ëŒ€í™”ë©ë‹ˆë‹¤. ì´ëŠ” ë””ìŠ¤í¬ ê³µê°„ ì ˆì•½ì€ ë¬¼ë¡ , ë””ìŠ¤í¬ì—ì„œ ì½ì–´ì˜¬ ë°ì´í„° ì–‘ ìžì²´ë¥¼ ì¤„ì—¬ I/O ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.
3. **ë²¡í„°í™”ëœ ì¿¼ë¦¬ ì‹¤í–‰ (Vectorized Query Execution):**
    - ê¸°ì¡´ DBê°€ ë°ì´í„°ë¥¼ í•œ ì¤„ì”©(row-by-row) ì²˜ë¦¬í•˜ëŠ” ë°˜ë©´, ClickHouseëŠ” ë°ì´í„°ë¥¼ **CPU ìºì‹œì— ë“¤ì–´ê°ˆ ë§Œí•œ ë©ì–´ë¦¬(ë²¡í„°) ë‹¨ìœ„ë¡œ ë¬¶ì–´ì„œ** í•œ ë²ˆì— ì²˜ë¦¬í•©ë‹ˆë‹¤. ì´ëŠ” CPUì˜ SIMD(Single Instruction, Multiple Data) ëª…ë ¹ì–´ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í™œìš©í•˜ì—¬ ì—°ì‚° ì†ë„ë¥¼ í­ë°œì ìœ¼ë¡œ ë†’ìž…ë‹ˆë‹¤.

### **ì¡°íšŒìˆ˜ ì‹œìŠ¤í…œì—ì„œì˜ êµ¬ì²´ì  í™œìš©**

- **ë°ì´í„° ì†ŒìŠ¤:** Kafkaì— ìŒ“ì´ëŠ” ìˆ˜ì‹­ì–µ ê±´ì˜ ì›ë³¸ ì¡°íšŒ ë¡œê·¸(`VIEW_LOGS`)ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ClickHouseì— ì ìž¬í•©ë‹ˆë‹¤.
- **í™œìš©**:
    - `VIDEO_STATS` í…Œì´ë¸”ì„ ë§Œë“œëŠ” **í†µê³„ ì§‘ê³„ ìž‘ì—…** (`ì‹œê°„/ì¼/ì£¼/ì›”ë³„ ì¡°íšŒìˆ˜ ì§‘ê³„`)
    - `ì§€ì—­ë³„ ë¶„ì„`, `ì‚¬ìš©ìž ì—°ë ¹ëŒ€ë³„ ì„ í˜¸ ì¹´í…Œê³ ë¦¬ ë¶„ì„` ë“± ë¹„ì¦ˆë‹ˆìŠ¤ ì¸í…”ë¦¬ì „ìŠ¤(BI) ì¿¼ë¦¬
    - ì–´ë·°ì§• íŒ¨í„´ íƒì§€ë¥¼ ìœ„í•œ ë³µìž¡í•œ ì¡°ê±´ì˜ ë°ì´í„° ìŠ¤ìº”

> ê²°ë¡ : ClickHouseëŠ” íŠ¸ëžœìž­ì…˜ì´ë‚˜ ê°œë³„ ë°ì´í„° ìˆ˜ì •ì„ ìœ„í•œ DBê°€ ì•„ë‹™ë‹ˆë‹¤. ìˆ˜ì •/ì‚­ì œê°€ ê±°ì˜ ì—†ëŠ” ê±°ëŒ€í•œ ë¡œê·¸ì„± ë°ì´í„°ë¥¼ ìŒ“ì•„ë‘ê³ , íŠ¹ì • ì»¬ëŸ¼ë“¤ì„ ëŒ€ìƒìœ¼ë¡œ ì—„ì²­ë‚œ ì†ë„ì˜ ì§‘ê³„ ë° ë¶„ì„ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ 'ë°ì´í„° ë¶„ì„ìš© ìµœì¢… ë³‘ê¸°'ìž…ë‹ˆë‹¤.
> 

---

### 3. Bloom Filter (ë¸”ë£¸ í•„í„°)

ë¸”ë£¸ í•„í„°ëŠ” "Setê³¼ ë¹„ìŠ·í•œë° ë” ì¢‹ì€ ê²ƒ"ì´ ì•„ë‹ˆë¼, **ë©”ëª¨ë¦¬ íš¨ìœ¨ì„ ìœ„í•´ ì •í™•ì„±ì„ ì•½ê°„ í¬ìƒí•œ í™•ë¥ ì  ìžë£Œêµ¬ì¡°**ìž…ë‹ˆë‹¤.

### ðŸ§ **í•µì‹¬ ì•„ì´ë””ì–´: "100% 'ì—†ë‹¤'ê³ ëŠ” ë§í•  ìˆ˜ ìžˆì§€ë§Œ, 'ìžˆë‹¤'ê³ ëŠ” í™•ì‹ í•  ìˆ˜ ì—†ë‹¤"**

ë¸”ë£¸ í•„í„°ëŠ” ë‘ ê°€ì§€ ëŒ€ë‹µë§Œ í•©ë‹ˆë‹¤:

1. "ì´ ì•„ì´í…œì€ **ì ˆëŒ€ë¡œ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**" (**False Negative ì—†ìŒ**)
2. "ì´ ì•„ì´í…œì€ **ì•„ë§ˆë„ ì¡´ìž¬í•  ê²ë‹ˆë‹¤.**" (**False Positive ìžˆìŒ**)

### **ì‹¬ì¸µ ë™ìž‘ ì›ë¦¬**

1. **êµ¬ì¡°:** `m`ê°œì˜ ë¹„íŠ¸ë¡œ ì´ë£¨ì–´ì§„ ê±°ëŒ€í•œ ë¹„íŠ¸ ë°°ì—´(Bit Array)ê³¼, ì„œë¡œ ë‹¤ë¥¸ ê²°ê³¼ë¥¼ ë‚´ëŠ” `k`ê°œì˜ í•´ì‹œ í•¨ìˆ˜ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì²˜ìŒì—” ëª¨ë“  ë¹„íŠ¸ê°€ 0ìž…ë‹ˆë‹¤.
2. **ë°ì´í„° ì¶”ê°€ (add):**
    - 'video_A'ë¼ëŠ” ë°ì´í„°ë¥¼ ì¶”ê°€í•œë‹¤ê³  ê°€ì •í•´ ë´…ì‹œë‹¤.
    - `k`ê°œì˜ í•´ì‹œ í•¨ìˆ˜ ê°ê°ì— 'video_A'ë¥¼ ë„£ì–´ `k`ê°œì˜ í•´ì‹œ ê°’(ìˆ«ìž)ì„ ì–»ìŠµë‹ˆë‹¤.
    - ì´ `k`ê°œì˜ ìˆ«ìžë“¤ì„ ë¹„íŠ¸ ë°°ì—´ì˜ ì¸ë±ìŠ¤ë¡œ ì‚¬ìš©í•˜ì—¬, í•´ë‹¹ ìœ„ì¹˜ì˜ ë¹„íŠ¸ë¥¼ `0`ì—ì„œ `1`ë¡œ ë°”ê¿‰ë‹ˆë‹¤.
3. **ë°ì´í„° í™•ì¸ (check):**
    - 'video_B'ê°€ ì¡´ìž¬í•˜ëŠ”ì§€ í™•ì¸í•´ ë´…ì‹œë‹¤.
    - ë§ˆì°¬ê°€ì§€ë¡œ `k`ê°œì˜ í•´ì‹œ í•¨ìˆ˜ì— 'video_B'ë¥¼ ë„£ì–´ `k`ê°œì˜ ì¸ë±ìŠ¤ë¥¼ ì–»ìŠµë‹ˆë‹¤.
    - ë¹„íŠ¸ ë°°ì—´ì—ì„œ ê·¸ `k`ê°œì˜ ì¸ë±ìŠ¤ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
        - **Case 1:** `k`ê°œì˜ ë¹„íŠ¸ ì¤‘ **ë‹¨ í•˜ë‚˜ë¼ë„ `0`ì´ë¼ë©´?** -> 'video_B'ëŠ” **100% ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.** (ë§Œì•½ ì¡´ìž¬í–ˆë‹¤ë©´ ê³¼ê±°ì— ëª¨ë“  ë¹„íŠ¸ê°€ 1ë¡œ ë°”ë€Œì—ˆì–´ì•¼ í•˜ë¯€ë¡œ)
        - **Case 2:** `k`ê°œì˜ ë¹„íŠ¸ê°€ **ëª¨ë‘ `1`ì´ë¼ë©´?** -> 'video_B'ê°€ **ì¡´ìž¬í•  ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.**
4. **False Positiveì˜ ì›ì¸:**
    - ì™œ 'ê°€ëŠ¥ì„±'ì¼ê¹Œìš”? 'video_A'ë¥¼ ì¶”ê°€í•  ë•Œ ì¼œì§„ ë¹„íŠ¸ë“¤ê³¼, 'video_C'ë¥¼ ì¶”ê°€í•  ë•Œ ì¼œì§„ ë¹„íŠ¸ë“¤ì´ **ìš°ì—°ížˆ ê²¹ì³ì„œ**, í•œ ë²ˆë„ ì¶”ê°€ëœ ì  ì—†ëŠ” 'video_B'ì˜ í•´ì‹œ ì¸ë±ìŠ¤ë“¤ì´ ëª¨ë‘ `1`ì´ ë˜ì–´ë²„ë¦´ ìˆ˜ ìžˆìŠµë‹ˆë‹¤. ì´ê²ƒì´ ë°”ë¡œ **False Positive (ì˜¤íƒ)**ìž…ë‹ˆë‹¤.

### ðŸŽ¯ **ì¡°íšŒìˆ˜ ì‹œìŠ¤í…œì—ì„œì˜ êµ¬ì²´ì  í™œìš©**

- **ë¬¸ì œ**: 'ì¤‘ë³µ ì¡°íšŒ ë°©ì§€'ë¥¼ ìœ„í•´ ì‚¬ìš©ìžê°€ ìµœê·¼ 24ì‹œê°„ ë‚´ì— ë³¸ ëª¨ë“  ì˜ìƒ IDë¥¼ Redis Setì— ì €ìž¥í•˜ë©´, ìˆ˜ë°±ë§Œ ì‚¬ìš©ìžì˜ ì‹œì²­ ê¸°ë¡ìœ¼ë¡œ ì¸í•´ Redis ë©”ëª¨ë¦¬ê°€ í„°ì ¸ë‚˜ê°‘ë‹ˆë‹¤.
- **í•´ê²°ì±… (ë¸”ë£¸ í•„í„° ì ìš©):**
    1. ì‚¬ìš©ìžë³„ë¡œ ìž‘ì€ ë¸”ë£¸ í•„í„°ë¥¼ í• ë‹¹í•©ë‹ˆë‹¤.
    2. ì‚¬ìš©ìžê°€ 'video_A'ë¥¼ ì‹œì²­í•˜ë©´, Redis Setì— ì €ìž¥í•˜ê¸° ì „ì— **ë¨¼ì € ë¸”ë£¸ í•„í„°ì— 'video_A'ë¥¼ ì¶”ê°€**í•©ë‹ˆë‹¤.
    3. ì´í›„ ì‚¬ìš©ìžê°€ ë‹¤ë¥¸ ì˜ìƒì„ ì‹œì²­í•  ë•Œ, ë¨¼ì € ë¸”ë£¸ í•„í„°ë¡œ ì¤‘ë³µ ì—¬ë¶€ë¥¼ ê²€ì‚¬í•©ë‹ˆë‹¤.
        - ë¸”ë£¸ í•„í„°ê°€ **"ì ˆëŒ€ ë³¸ ì  ì—†ìŒ"**ì´ë¼ê³  ë‹µí•˜ë©´ -> **ìƒˆë¡œìš´ ì¡°íšŒë¡œ ì¸ì •**í•˜ê³ , Redis Setê³¼ ë¸”ë£¸ í•„í„°ì— ëª¨ë‘ ê¸°ë¡í•©ë‹ˆë‹¤. (DBê¹Œì§€ ê°ˆ í•„ìš”ë„ ì—†ìŒ)
        - ë¸”ë£¸ í•„í„°ê°€ **"ì•„ë§ˆ ë³¸ ì  ìžˆìŒ"**ì´ë¼ê³  ë‹µí•˜ë©´ -> **ê·¸ë•Œì„œì•¼ ë¹„ë¡œì†Œ** ì§„ì§œ ì¤‘ë³µì¸ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ **Redis Setì— ì¡°íšŒ**ë¥¼ í•©ë‹ˆë‹¤.
- **íš¨ê³¼:** ëŒ€ë¶€ë¶„ì˜ ì¤‘ë³µë˜ì§€ ì•ŠëŠ” ì¡°íšŒ ìš”ì²­ì„ ë¸”ë£¸ í•„í„° ë‹¨ê³„ì—ì„œ ë§¤ìš° ì €ë ´í•œ ë¹„ìš©ìœ¼ë¡œ ê±¸ëŸ¬ë‚´ê³ , ì •ë§ ì¤‘ë³µì¼ ê°€ëŠ¥ì„±ì´ ë†’ì€ ê·¹ì†Œìˆ˜ì˜ ìš”ì²­ì— ëŒ€í•´ì„œë§Œ ë¹„ì‹¼ Redis ì¡°íšŒë¥¼ ìˆ˜í–‰í•˜ì—¬ ì‹œìŠ¤í…œ ë¶€í•˜ë¥¼ íšê¸°ì ìœ¼ë¡œ ì¤„ìž…ë‹ˆë‹¤.

> ê²°ë¡ : ë¸”ë£¸ í•„í„°ëŠ” 'ë³¸ê²Œìž„(DB/Redis ì¡°íšŒ)ì— ë“¤ì–´ê°€ê¸° ì „, ìž…êµ¬ì—ì„œ ëŒ€ë¶€ë¶„ì˜ ìš”ì²­ì„ ê±¸ëŸ¬ë‚´ëŠ” ê°’ì‹¼ í•„í„°' ì—­í• ì„ í•©ë‹ˆë‹¤. ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ í¬ê²Œ ì¤„ì´ëŠ” ëŒ€ì‹ , ì•½ê°„ì˜ ì˜¤íƒ(False Positive)ì„ ê°ìˆ˜í•˜ëŠ” íŠ¸ë ˆì´ë“œì˜¤í”„ ê´€ê³„ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì´ í•µì‹¬ìž…ë‹ˆë‹¤.
>
