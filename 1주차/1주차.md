
## 디프만 콘서트 예매 시스템(가칭)

한 공연장의 좌석을 온라인으로 판매하려고 합니다.
사용자는 좌석 배치를 보고 원하는 좌석을 선택한 뒤 결제할 수 있어야 하며, 이미 판매된 좌석은 다시 판매되면 안 됩니다.
또한 좌석을 고른 뒤 일정 시간 안에 결제를 완료하지 않으면 좌석은 자동으로 풀려야 합니다.

### 가정

- 단일 이벤트(공연 1회차)만 다룬다.
- PC 웹 기준(모바일 고려는 선택).
- 외부 결제는 **“결제 성공 콜백이 온다”** 가정(실제 결제 연동은 모의).

## 기능적 요구사항

- 사용자는 해당 페이지에서, 전체 좌석, 열, 그리고 좌석 상태에 대해 조회 할 수 있다.
- 좌석은 **선택 → 결제 → 확정(판매완료)** 의 흐름을 가진다.
- 결제가 완료된 좌석은 다시 판매될 수 없다.
- 사용자는 예매가 완료되기까지 동기적으로 응답을 확인해야 한다.
- 사용자는 자신의 예매 내역을 조회할 수 있다.
- 사용자는 예매가 완료되기까지 대기열에서 대기해야한다.
- 좌석 예매와 관련된 로그를 저장하고 조회해야한다.

## 비 기능적 요구사항.

1. 중복 판매가 되어서는 안된다.
2. 예매가 열리는 순간 피크 사용자가, 20만명이라고 가정한다.
3. 전체 좌석은 만오천석이라고 가정.
4. 좌석 조회는 p95,p99 <150ms 이내

## 이런거를 해보면 좋아요

- ERD 설계
- 아키텍처 다이어그램 그리기

## (Optioanl) 추가 고민해보면 좋을만한 사항들

- 동시에 여러 사람이 같은 좌석을 선택하면 어떻게 막을까?
- 결제 실패/타임아웃이 발생하면 좌석 상태를 어떻게 돌려놓을까?
- 같은 주문 요청을 여러 번 보내면 어떻게 처리할까?
- 같은 주문 요청이 여러 번 오면(중복 클릭 등) 어떻게 막을 수 있을까?
- 수십만 명이 동시에 접속하면 어떤 부분이 가장 먼저 병목이 될까?
- 00명이 대기중입니다.와 같은 대기열을 어떻게 만들수 있을까?
